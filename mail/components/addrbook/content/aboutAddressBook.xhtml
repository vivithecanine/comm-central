<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, you can obtain one at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns:html="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title data-l10n-id="about-addressbook-title"></title>

  <link rel="stylesheet" href="chrome://global/skin/global.css" />
  <link rel="stylesheet" href="chrome://global/skin/in-content/common.css" />
  <link rel="stylesheet" href="chrome://messenger/skin/messenger.css" />
  <link rel="stylesheet" href="chrome://messenger/skin/primaryToolbar.css" />
  <link rel="stylesheet" href="chrome://messenger/content/tree-listbox.css" />
  <link rel="stylesheet" href="chrome://messenger/skin/aboutAddressBook.css" />

  <link rel="localization" href="messenger/addressbook/aboutAddressBook.ftl" />
  <link rel="localization" href="messenger/preferences/preferences.ftl" />

  <script src="chrome://global/content/globalOverlay.js"></script>
  <script src="chrome://global/content/editMenuOverlay.js"></script>
  <script src="chrome://messenger/content/tree-listbox.js"></script>
  <script src="chrome://messenger/content/jsTreeView.js"></script>
  <script src="chrome://messenger/content/addressbook/abView-new.js"></script>
  <script src="chrome://messenger/content/addressbook/aboutAddressBook.js"></script>
</head>
<body>
  <xul:toolbox id="toolbox" class="contentTabToolbox" labelalign="end">
    <xul:toolbar class="chromeclass-toolbar contentTabToolbar" mode="full">
    </xul:toolbar>
  </xul:toolbox>
  <div id="booksPane">
    <!--
      TODO: Prevent tab focus on overflowing item names. Tried tabindex="-1" but it makes
      clicking focus on the name.
    -->
    <ul is="ab-tree-listbox" id="books">
      <li role="option" id="allAddressBooks" class="bookRow noDelete readOnly">
        <div class="bookRow-container">
          <div class="twisty"></div>
          <div class="bookRow-icon"></div>
          <span class="bookRow-name" data-l10n-id="all-address-books"></span>
        </div>
      </li>
    </ul>
    <template id="bookRow">
      <li role="option" class="bookRow">
        <div class="bookRow-container">
          <div class="twisty"></div>
          <div class="bookRow-icon"></div>
          <span class="bookRow-name"></span>
        </div>
        <ul class="bookRow-children"></ul>
      </li>
    </template>
    <template id="listRow">
      <li class="listRow" role="option">
        <div class="listRow-container">
          <div class="listRow-icon"></div>
          <span class="listRow-name"></span>
        </div>
      </li>
    </template>
  </div>
  <div id="cardsPane">
    <div id="cardsHeader">
      <input is="ab-card-search-input" id="searchInput"
             type="search"
             data-l10n-attrs="placeholder" />
      <button id="sortButton">
        <img src="chrome://calendar/skin/shared/icons/sort.svg" alt="" />
      </button>
    </div>
    <tree-view-listbox id="cards" rows="ab-card-listrow"></tree-view-listbox>
  </div>
  <div id="detailsPane" hidden="hidden">
  </div>

  <!-- In-content dialogs. -->
  <xul:stack id="dialogStack" hidden="true"/>
  <xul:vbox id="dialogTemplate"
            class="dialogOverlay"
            align="center"
            pack="center"
            topmost="true"
            hidden="true">
    <xul:vbox class="dialogBox"
              pack="end"
              role="dialog"
              aria-labelledby="dialogTitle">
      <xul:hbox class="dialogTitleBar" align="center">
        <xul:label class="dialogTitle" flex="1"/>
        <xul:button class="dialogClose close-icon" data-l10n-id="close-button"/>
      </xul:hbox>
      <xul:browser class="dialogFrame"
                   autoscroll="false"
                   disablehistory="true"/>
    </xul:vbox>
  </xul:vbox>
</body>
<xul:menupopup id="bookContext">
  <xul:menuitem id="bookContextProperties"
                data-l10n-id="about-addressbook-books-context-properties"
                oncommand="booksList.showPropertiesOfSelected();"/>
  <xul:menuitem id="bookContextSynchronize"
                data-l10n-id="about-addressbook-books-context-synchronize"
                oncommand="booksList.synchronizeSelected();"/>
  <xul:menuitem id="bookContextDelete"
                data-l10n-id="about-addressbook-books-context-delete"
                oncommand="booksList.deleteSelected();"/>
</xul:menupopup>
<xul:menupopup id="sortContext">
  <xul:menuitem type="radio"
                name="format"
                value="0"
                checked="true"
                data-l10n-id="about-addressbook-name-format-display"
                oncommand="cardsPane.setNameFormat(this.value);"/>
  <xul:menuitem type="radio"
                name="format"
                value="2"
                data-l10n-id="about-addressbook-name-format-firstlast"
                oncommand="cardsPane.setNameFormat(this.value);"/>
  <xul:menuitem type="radio"
                name="format"
                value="1"
                data-l10n-id="about-addressbook-name-format-lastfirst"
                oncommand="cardsPane.setNameFormat(this.value);"/>
  <xul:menuseparator/>
  <xul:menuitem type="radio"
                name="sort"
                value="GeneratedName ascending"
                checked="true"
                data-l10n-id="about-addressbook-sort-name-ascending"
                oncommand="cardsPane.sortCards(event);"/>
  <xul:menuitem type="radio"
                name="sort"
                value="GeneratedName descending"
                data-l10n-id="about-addressbook-sort-name-descending"
                oncommand="cardsPane.sortCards(event);"/>
  <xul:menuitem type="radio"
                name="sort"
                value="PrimaryEmail ascending"
                data-l10n-id="about-addressbook-sort-email-ascending"
                oncommand="cardsPane.sortCards(event);"/>
  <xul:menuitem type="radio"
                name="sort"
                value="PrimaryEmail descending"
                data-l10n-id="about-addressbook-sort-email-descending"
                oncommand="cardsPane.sortCards(event);"/>
</xul:menupopup>
</html>
