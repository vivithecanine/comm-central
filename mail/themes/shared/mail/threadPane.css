/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, you can obtain one at http://mozilla.org/MPL/2.0/. */

@media not (prefers-contrast) {
  :root {
    --thread-pane-flag-fill: var(--color-orange-30);
    --thread-pane-flag-stroke: var(--color-orange-60);
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --thread-pane-flag-fill: var(--color-orange-40);
      --thread-pane-flag-stroke: var(--color-orange-50);
    }
  }
}

#threadTreePane > tree-view {
  -moz-context-properties: fill;
  fill: currentColor;
}

#threadTree [data-properties~="unread"] {
  font-weight: bold;
}

#threadTree .children.collapsed[data-properties~="hasUnread"][data-properties~="unread"] {
  text-decoration: underline;
}

#messageThreadTree thead[is="tree-view-table-header"] th::before {
  display: none;
}

/* Thread column */

#threadColButton {
  text-align: center;
}

.tree-view-header-thread img {
  content: var(--icon-thread-sm);
  pointer-events: none;
}

.tree-view-row-thread img {
  content: var(--icon-thread-sm);
  color: inherit;
  /* Don't center align this because it could be the last column, spanning for
     2 columns to account for the picker, therefore a center alignment would be
     wrong. */
  margin-inline-start: 3px;
  opacity: 0.7;
}

/* Starred column */

#flaggedColButton {
  text-align: center;
}

#flaggedColButton img {
  content: var(--icon-star-sm);
}

.tree-view-row-flag button {
  color: inherit;
  opacity: 0.8;
}

.tree-view-row-flag img {
  fill: color-mix(in srgb, currentColor 10%, transparent);
  stroke: color-mix(in srgb, currentColor 30%, transparent);
}

#threadTree [data-properties~="flagged"] .tree-view-row-flag img {
  fill: var(--thread-pane-flag-fill);
  stroke: var(--thread-pane-flag-stroke);
}

.tree-view-row-flag button:hover {
  opacity: 1;
  background-color: transparent;
  border-color: transparent;
}

.tree-view-row-flag button:hover:active {
  background-color: color-mix(in srgb, currentColor 20%, transparent);
  border-color: transparent;
  color: currentColor;
}

[is="tree-view-listbox"]:focus .selected .tree-view-row-flag button:hover {
  background-color: transparent;
  color: currentColor;
}

.tree-view-row-flag img {
  content: var(--icon-star);
  pointer-events: none;
}

/* Subject column variations */

#subjectColButton {
  padding-inline-start: 22px;
}

tr[is="thread-listrow"] td > .thread-container {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  gap: 6px;
  max-height: inherit;
  box-sizing: border-box;
}

tr[is="thread-listrow"] .subject-line {
  text-overflow: ellipsis;
  overflow-y: visible;
  white-space: nowrap;
  overflow-x: hidden;
  /* Line height px exception to avoid vertical cut off of characters. This
     should follow and match the density variation height of the row. */
  line-height: 22px;
  margin-inline-start: calc(16px * var(--thread-level));
}

tr[is="thread-listrow"]:not(.children) .subject-line {
  padding-inline-start: 22px;
}

tr[is="thread-listrow"] .twisty {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  color: currentColor;
}

tr[is="thread-listrow"]:not(.children) .twisty {
  display: none;
}

tr[is="thread-listrow"] .twisty-icon {
  width: 12px;
  height: 12px;
  content: var(--icon-nav-down-sm);
  margin: 1px;
}

/* Delete column variations */
/* TODO: Handle delete button color variations for tagged messages */
