/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

calendar-minimonth {
  --mmMainColor: -moz-DialogText;
  --mmMainBackground: var(--color-gray-05);
  --mmMainBorderColor: var(--color-gray-20);
  --mmMainBorderRadius: 6px;
  --mmHighlightColor: var(--selected-item-text-color);
  --mmHighlightBackground: var(--selected-item-color);
  --mmHighlightBorderColor: var(--selected-item-color);
  --mmBoxBackground: hsla(0, 0%, 60%, 0.15);
  --mmBoxBorderColor: ThreeDShadow;
  --mmDayColor: var(--color-gray-70);
  --mmDayBackground: transparent;
  --mmDayBorderColor: transparent;
  --mmDayOtherColor: var(--color-gray-40);
  --mmDayWeekColor: var(--color-ink-40);
  --mmDayOtherBackground: transparent;
  --mmDayOtherBorderColor: transparent;
  --mmDayTodayColor: var(--color-gray-90);
  --mmDayTodayBackground: color-mix(in srgb, var(--color-ink-40) 20%, transparent);
  --mmDayTodayBorderColor: transparent;
  --mmDaySelectedColor: var(--color-blue-60);
  --mmDaySelectedBackground: var(--color-blue-10);
  --mmDaySelectedBorderColor: var(--color-blue-50);
  --mmDaySelectedTodayBackground: var(--color-blue-10);
  --mmDaySelectedTodayBorderColor: var(--color-blue-50);
  --mmDayBorderRadius: 3px;
  --mmDayPadding: 4px;
  --mmDayBusyColor: var(--color-blue-50);
  --mmDayBusyIndicatorSize: 4px;
}

:root[lwt-tree]:not([lwt-tree-brighttext]) calendar-minimonth {
  --mmMainColor: var(--sidebar-text-color, FieldText);
  --mmMainBackground: transparent;
  --mmHighlightColor: var(--sidebar-highlight-text-color, var(--selected-item-text-color));
  --mmHighlightBackground: var(--sidebar-highlight-background-color, var(--selected-item-color));
  --mmHighlightBorderColor: var(--sidebar-highlight-background-color, var(--selected-item-color));
  --mmBoxBackground: var(--sidebar-background-color, Field);
  --mmBoxBorderColor: var(--sidebar-background-color, Field);
  --mmDayTodayColor: var(--color-gray-90);
  --mmDayTodayBorderColor: transparent;
  --mmDayColor: var(--color-gray-70);
  --mmDayBorderColor: transparent;
  --mmDayOtherColor: var(--color-gray-40);
  --mmDayOtherBackground: transparent;
  --mmDayOtherBorderColor: transparent;
}

@media (prefers-color-scheme: dark) {
  calendar-minimonth {
    --mmMainColor: var(--sidebar-text-color, FieldText);
    --mmMainBackground: var(--color-gray-70);
    --mmMainBorderColor: var(--color-gray-50);
    --mmHighlightColor: var(--sidebar-highlight-text-color, var(--selected-item-text-color));
    --mmHighlightBackground: var(--sidebar-highlight-background-color, var(--selected-item-color));
    --mmHighlightBorderColor: var(--sidebar-highlight-background-color, var(--selected-item-color));
    --mmBoxBackground: var(--sidebar-background-color, Field);
    --mmBoxBorderColor: transparent;
    --mmDayTodayColor: var(--color-ink-10);
    --mmDayTodayBorderColor: transparent;
    --mmDayColor: var(--color-gray-10);
    --mmDayBackground: transparent;
    --mmDayBorderColor: transparent;
    --mmDayOtherColor: var(--color-gray-50);
    --mmDayOtherBackground: transparent;
    --mmDayOtherBorderColor: transparent;
    --mmDaySelectedColor: var(--color-ink-10);
    --mmDaySelectedBackground: color-mix(in srgb, var(--color-blue-40) 20%, transparent);
    --mmDaySelectedBorderColor: var(--color-blue-50);
    --mmDaySelectedTodayBackground: color-mix(in srgb, var(--color-blue-40) 30%, transparent);
    --mmDaySelectedTodayBorderColor: var(--color-blue-50);
    --mmDayWeekColor: var(--color-ink-40);
  }
}

@media (prefers-contrast) {
  calendar-minimonth {
    --mmMainBackground: transparent;
    --mmDayColor: WindowText;
    --mmDayOtherColor: GrayText;
    --mmDayWeekColor: var(--selected-item-color);
    --mmDayOtherBackground: transparent;
    --mmDayTodayColor: -moz-DialogText;
    --mmDayTodayBackground: Field;
    --mmDayTodayBorderColor: var(--selected-item-color);
    --mmDaySelectedColor: var(--selected-item-text-color);
    --mmDaySelectedBackground: var(--selected-item-color);
    --mmDaySelectedBorderColor: ButtonFace;
    --mmDaySelectedTodayBackground: var(--selected-item-color);
    --mmDaySelectedTodayBorderColor: ButtonFace;
  }
}

:root[uidensity="compact"] calendar-minimonth {
  --mmDayPadding: 2px;
}

:root[uidensity="touch"] calendar-minimonth {
  --mmDayPadding: 8px;
}

.datepicker-menulist > menupopup::part(content) {
  --panel-padding: 3px;
}

calendar-minimonth {
  background-color: var(--mmMainBackground);
  border-width: 0;
  color: var(--mmMainColor);
  padding: 4px;
  min-width: 175px;
}

calendar-minimonth:not([readonly="true"]) .minimonth-readonly-header,
calendar-minimonth[readonly="true"] .minimonth-header {
  display: none;
}

calendar-minimonth[readonly="true"] .minimonth-readonly-header {
  display: flex;
  justify-content: center;
  align-items: center;
}

.minimonth-month-box {
  background-color: var(--mmBoxBackground);
  border: 1px dotted var(--mmBoxBorderColor);
  font-weight: bold;
  text-align: center;
  height: 22px;
}

.minimonth-month-name {
  text-align: center;
  font-weight: bold;
  padding: 0px;
  -moz-user-focus: normal;
}

.minimonth-year-name {
  width: 5ch;
  text-align: center;
  font-weight: bold;
  padding: 0px;
  -moz-user-focus: normal;
}

.minimonth-nav-btns {
  appearance: none;
  padding: 4px;
  border-radius: 2px;
  list-style-image: var(--icon-nav-right-sm);
  -moz-user-focus: normal;
  -moz-context-properties: stroke;
  stroke: currentColor;
}

.minimonth-nav-btns:hover {
  background-color: hsla(0, 0%, 0%, 0.1);
  color: inherit;
  outline: none;
}

.minimonth-nav-btns:hover:active {
  background-color: hsla(0, 0%, 0%, 0.2);
  color: inherit;
}

:root[lwt-tree-brighttext] .minimonth-nav-btns:hover {
  background-color: hsla(0, 0%, 100%, 0.1);
}

:root[lwt-tree-brighttext] .minimonth-nav-btns:hover:active {
  background-color: hsla(0, 0%, 100%, 0.2);
}

.minimonth-nav-btns > .toolbarbutton-text  {
  display: none;
}

.minimonth-nav-btns[disabled] {
  opacity: .3;
}

.minimonth-nav-btns:-moz-locale-dir(ltr)[dir="-1"],
.minimonth-nav-btns:-moz-locale-dir(rtl)[dir="1"] {
  list-style-image: var(--icon-nav-left-sm);
}

.minimonth-nav-btns[dir="0"] {
  list-style-image: var(--icon-nav-today);
}

.minimonth-cal-box {
  border-spacing: 0px;
}

.minimonth-cal-box th, .minimonth-cal-box td {
  width: 12.5%; /* 100% / 8 columns */
}

.minimonth-row-header {
  text-align: center;
}

.minimonth-day {
  color: var(--mmDayColor);
  text-align: center;
  border: 1px solid var(--mmDayBorderColor);
  border-radius: var(--mmDayBorderRadius);
  background-color: var(--mmDayBackground);
  min-height: 16px;
  padding: var(--mmDayPadding);
}

.minimonth-row-header-week {
  color: var(--mmDayOtherColor);
  text-align: center;
}

.minimonth-week {
  color: var(--mmDayWeekColor);
  text-align: center;
  border: 1px solid var(--mmDayBorderColor);
  background-color: var(--mmMainBackground);
  min-height: 16px;
}

.minimonth-day[othermonth="true"] {
  color: var(--mmDayOtherColor);
  background-color: var(--mmDayOtherBackground);
  border: 1px solid var(--mmDayOtherBorderColor);
}

.minimonth-day[today="true"] {
  background-color: var(--mmDayTodayBackground);
  border: 1px solid var(--mmDayTodayBorderColor);
  color: var(--mmDayTodayColor);
  font-weight: 800;
}

.minimonth-day[selected="true"] {
  background-color: var(--mmDaySelectedBackground);
  color: var(--mmDaySelectedColor);
  border: 1px solid var(--mmDaySelectedBorderColor);
}

#repeat-until-datepicker .minimonth-day[extra="true"],
#repeat-until-date .minimonth-day[extra="true"] {
  border: 1px solid var(--mmDayOtherColor);
}

#repeat-until-datepicker .minimonth-day:hover[extra="true"],
#repeat-until-date .minimonth-day:hover[extra="true"] {
  border: 1px solid var(--mmHighlightBorderColor);
}

.minimonth-day[selected="true"][today="true"] {
  background-color: var(--mmDaySelectedTodayBackground);
  border: 1px solid var(--mmDaySelectedTodayBorderColor);
}

.minimonth-day,
.minimonth-week {
  vertical-align: top;
  padding: var(--mmDayPadding);
}

.minimonth-day::after {
  content: "";
  display: block;
  height: var(--mmDayBusyIndicatorSize);
  width: var(--mmDayBusyIndicatorSize);
  margin-block-start: 2px;
  margin-inline: auto;
  border-radius: 50%;
  background-color: transparent;
}

.minimonth-day[busy]::after {
  background-color: var(--mmDayBusyColor);
}

.minimonth-day:hover[interactive] {
  cursor: pointer;
  border: 1px solid var(--mmDaySelectedTodayBorderColor);
  outline: none;
}

.minimonth-day:hover[interactive][selected="true"] {
  border-color: var(--mmHighlightBorderColor);
}

.minimonth-day:active[interactive] {
  background-color: var(--mmHighlightBackground);
  color: var(--mmHighlightColor);
}

.minimonth-list {
  padding-inline-start: 1em;
  padding-inline-end: 1em;
}

.minimonth-list[current="true"] {
  font-weight: bold;
}

.minimonth-list:hover {
  background-color: var(--mmHighlightBackground);
  color: var(--mmHighlightColor);
  cursor: pointer;
}

calendar-minimonth :focus-visible:not(:hover) {
  outline: 2px solid var(--focus-outline-color);
  outline-offset: -2px;
}

/* Minimonth border */

#minimonth-pane calendar-minimonth,
#recurrencePreview calendar-minimonth {
  border: 1px solid var(--mmMainBorderColor);
  border-radius: var(--mmMainBorderRadius);
}
