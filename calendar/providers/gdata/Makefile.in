# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

XPI_PKGNAME = gdata-provider

final_parent = $(ABS_DIST)/bin/extensions
ifdef MOZ_ARTIFACT_BUILDS
final_dest = $(final_parent)/{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}

tools::
	$(RM) -r $(final_dest)
ifeq ($(OS_ARCH),WINNT)
	$(NSINSTALL) -D $(final_dest)
	$(call copy_dir,$(FINAL_TARGET),$(final_dest))
else
	$(NSINSTALL) -D $(final_parent)
	ln -s $(ABS_DIST)/xpi-stage/gdata-provider $(final_dest)
endif
endif # MOZ_ARTIFACT_BUILDS

stage-package:
ifdef MOZ_ARTIFACT_BUILDS
	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(DIST)/xpi-stage/$(XPI_PKGNAME).xpi
else
	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(final_parent)/$(XPI_PKGNAME).xpi
endif
